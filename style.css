        /* CSS giữ nguyên như file gốc */
        .links-dropdown {
            display: block; position: absolute; background-color: #fff; min-width: 300px; max-width: 500px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); z-index: 20; border-radius: 4px; border: 1px solid #ddd; padding: 5px;
        }
        .links-dropdown a {
            color: #0056b3; padding: 8px 12px; text-decoration: none; display: block; font-size: 14px;
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
        }
        .links-dropdown a:hover { background-color: #f1f1f1; text-decoration: underline; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0; background-color: #f4f4f9; line-height: 1.6;
        }
        #container {
            max-width: 1400px; margin: auto; background-color: white;
            padding: 25px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: block;
        }
        #login-container {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6);
            animation: fadeIn 0.3s;
        }
        #login-box {
            max-width: 400px;
            margin: 10% auto;
            padding: 30px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            text-align: center;
            position: relative;
            animation: slideIn 0.3s;
        }
        #login-box h2 { margin-top: 0; color: #333; }
        #login-box input {
            width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ccc;
            border-radius: 4px; box-sizing: border-box; font-size: 16px;
        }
        #login-box button { width: 100%; padding: 12px; font-size: 16px; }
        #login-container h2 { margin-top: 0; color: #333; }
        #login-container input {
            width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ccc;
            border-radius: 4px; box-sizing: border-box; font-size: 16px;
        }
        #login-container button { width: 100%; padding: 12px; font-size: 16px; }
        #login-error { color: #dc3545; margin-top: 15px; font-weight: bold; }

        h1, h2 { color: #333; }
        h3 { color: #555; font-weight: normal; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .button-group {
            display: flex; justify-content: space-between; align-items: center;
            margin-top: 10px; flex-wrap: wrap;
        }
        .button-group > div { display: flex; gap: 10px; flex-wrap: wrap; }
        button {
            border: none; padding: 10px 18px; border-radius: 5px;
            cursor: pointer; font-size: 16px; transition: background-color: 0.3s, transform: 0.1s;
        }
        button:disabled { background-color: #ccc; cursor: not-allowed; }
        button:active { transform: scale(0.98); }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-primary:hover { background-color: #0056b3; }
        .btn-danger { background-color: #dc3545; color: white; }
        .btn-danger:hover { background-color: #c82333; }
        .btn-secondary { background-color: #6c757d; color: white; }
        .btn-secondary:hover { background-color: #5a6268; }
        .btn-success { background-color: #28a745; color: white; }
        .btn-success:hover { background-color: #218838; }
        .btn-info { background-color: #17a2b8; color: white; }
        .btn-info:hover { background-color: #138496; }
        .btn-warning { background-color: #ffc107; color: #212529; }
        .btn-warning:hover { background-color: #e0a800; }
        .btn-action { padding: 5px 10px; font-size: 14px; margin-right: 5px;}

        input[type="file"] { border: 1px solid #ccc; padding: 8px; border-radius: 4px; }
		
	/* Thiết lập cho bảng dữ liệu */
        #taskList { margin-top: 20px; border-collapse: collapse; width: 100%; table-layout: fixed; }
        #taskList th, #taskList td {
            border: 1px solid #ddd; padding: 10px; text-align: left;
            vertical-align: middle; word-wrap: break-word;
            font-size: 80%;
        }
        #taskList th:first-child, #taskList td:first-child,
        #taskList th:nth-child(2), #taskList td:nth-child(2) {
             padding-left: 4px;
             text-align: left;
        }

        #taskList .btn-action { font-size: 14px; }
        #taskList th {
            background-color: #f2f2f2;
            position: sticky;
            top: 0;
            z-index: 10;
        }
       /* Cấp 1 (A, B...): Luôn đậm, nền tối nhất, CHỮ MÀU XANH NƯỚC BIỂN */
        .task-parent td { 
            font-weight: bold; 
            background-color: #e2e6ea; 
            color: #0056b3; /* Thêm dòng này để đổi màu chữ */
        }
        
        /* Cấp 2 (I, II...): Luôn đậm, nền sáng hơn chút */
        .task-child td { font-weight: bold; background-color: #e9ecef; }
        
        /* Cấp 3 (1, 2...): Mặc định đậm (nếu là cha), nền sáng hơn nữa */
        .task-grandchild td { font-weight: bold; background-color: #f2f4f6; }
		.task-grandchild .col-tagname {
            font-style: normal !important;
			font-weight: normal !important;
			color: #d63384; /* Màu hồng tím để nổi bật tag */
			}
		.task-grandchild .col-ghichu {
            font-style: normal !important;
			font-weight: normal !important;
			}
			
        /* Cấp 3 (1, 2...) NHƯNG LÀ LÁ (Không có con): Chữ thường */
        .task-grandchild.is-parent-leaf td { font-weight: normal; }

        /* Cấp 4 (1.1, 1.2...): Luôn là lá -> Chữ thường, nền sáng nhất */
        .task-great-grandchild td { font-weight: normal; background-color: #f8f9fa; }
        
        /* Đảm bảo khi là lá thì đè font-weight kể cả có class khác */
        tr.is-parent-leaf td { font-weight: normal !important; }
        .task-great-great-grandchild td:nth-child(3) { font-style: italic; padding-left: 18px !important; }
        .task-justification { display: none; }
        .task-justification td { background-color: #fffbe6; color: red; }
        .task-justification td:nth-child(3) { padding-left: 30px !important; font-style: italic; }
        /* --- SỬA ĐỔI: Căn lề cho dòng Giải trình --- */
        
        /* Cột Nội dung (Cột 3): Giữ nguyên thụt đầu dòng và in nghiêng */
        .task-justification td:nth-child(3) { 
            padding-left: 30px !important; 
            font-style: italic; 
        }

        /* Cột TT (Cột 2): Bắt buộc căn sát lề phải, xóa padding trái để không bị đẩy */
        .task-justification td.col-tt {
            text-align: left !important;   /* Bắt buộc căn phải */
            padding-right: 0px !important;  
            padding-left: 1px !important;   
            font-style: italic;             /* Chữ nghiêng cho đồng bộ */
        }

        /* Xóa bỏ rule cũ gây xung đột (đã được thay thế bởi rule .col-tt ở trên) */
        /* .task-justification td:nth-child(2) { ... } -> ĐÃ XÓA */

        #taskList th.text-right, #taskList td.text-right { text-align: right; padding-right: 4px; }
        #taskList th.col-donvi, #taskList td.col-donvi,
        #taskList th.col-soluong, #taskList td.col-soluong {
            text-align: center;
        }

        #status { margin-top: 15px; font-weight: bold; }
        #status.success { color: #28a745; }
        #status.error { color: #dc3545; }

        #summarySection {
            background-color: #e9ecef; padding: 15px; border-radius: 5px; margin-top: 20px;
            display: flex; justify-content: space-between; flex-wrap: wrap;
            position: relative;
        }
        .summary-column { width: 48%; }
        #summarySection p { margin: 5px 0; font-size: 16px; }
        #summarySection p strong { color: #333; }
        .percentage { color: #007bff; font-weight: bold; }

        .modal {
            display: none; position: fixed; z-index: 1000; left: 0; top: 0;
            width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s;
        }
        @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
        .modal-content {
            background-color: #fefefe; margin: 5% auto; padding: 25px;
            border: 1px solid #888; width: 90%; max-width: 1200px; border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2); animation: slideIn 0.3s;
        }
        @keyframes slideIn { from {transform: translateY(-50px);} to {transform: translateY(0);} }
        .modal-table { width: 100%; border-collapse: collapse; margin-top: 15px; table-layout: fixed; }
        .modal-table th, .modal-table td { border: 1px solid #ddd; padding: 8px; }
        .modal-table th { background-color: #f2f2f2; font-size: 80%; }
        .modal-table input { width: 95%; padding: 6px; border: 1px solid #ccc; border-radius: 4px; }
        .modal-table input:disabled { background-color: #e9ecef; cursor: not-allowed;}

        .col-noidung { width: 20%; }
		.col-tagname { width: 5%; text-align: center; }
        .col-dv-thuchien { width: 8%; }
        .col-tt, .col-donvi, .col-soluong, .col-tansuat-th, .col-capdo, .col-hoso { width: 3%; }
		.col-soluong { width: 4%; }
        .col-ghichu { width: 10%; }
        .col-chiphi, .col-thanhtien, .col-kh-nam-truoc, .col-th-nam-truoc { width: 8%; }
        .col-tg-batdau, .col-tg-hoanthanh { width: 3%; }
        .col-dvt, .col-dongia { width: 6%; }

        .modal-table th:nth-child(1), .modal-table td:nth-child(1) { width: 3%; }
        .modal-table th:nth-child(2), .modal-table td:nth-child(2) { width: 25%; }
        .modal-table th:nth-child(3), .modal-table td:nth-child(3) { width: 6%; }
        .modal-table th:nth-child(4), .modal-table td:nth-child(4) { width: 7%; }
        .modal-table th:nth-child(6), .modal-table td:nth-child(6) { width: 3%; }
        .modal-table th:nth-child(8), .modal-table td:nth-child(8) { width: 3%; }
        .modal-table th:nth-child(9), .modal-table td:nth-child(9) { width: 7%; }
        .modal-table th:nth-child(10), .modal-table td:nth-child(10) { width: 3%; }
        .modal-table th:nth-child(11), .modal-table td:nth-child(11) { width: 3%; }

        .execution-modal-table th:nth-child(1), .execution-modal-table td:nth-child(1) { width: 8%; }
        .execution-modal-table th:nth-child(2), .execution-modal-table td:nth-child(2) { width: 54%; }
        .execution-modal-table th:nth-child(3), .execution-modal-table td:nth-child(3) { width: 12%; }
        .execution-modal-table th:nth-child(4), .execution-modal-table td:nth-child(4) { width: 13%; }
        .execution-modal-table th:nth-child(5), .execution-modal-table td:nth-child(5) { width: 13%; }

        .modal-footer { text-align: right; margin-top: 20px; }
        .close-button { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }

        #scrollToTopBtn {
            display: none; position: fixed; bottom: 25px; right: 25px; z-index: 999;
            border: none; outline: none; background-color: #007bff; color: white; cursor: pointer;
            padding: 0; border-radius: 50%; font-size: 24px; width: 50px; height: 50px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3); transition: background-color: 0.3s, transform 0.2s;
        }
        #scrollToTopBtn:hover { background-color: #0056b3; transform: translateY(-2px); }

        .dropdown { position: relative; display: inline-block; }
        .dropdown-content {
            display: none; position: absolute; background-color: #f9f9f9; min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); z-index: 1; right: 0; border-radius: 4px;
        }
        .dropdown-content a { color: black; padding: 12px 16px; text-decoration: none; display: block; font-size: 14px; }
        .dropdown-content a:hover { background-color: #f1f1f2; }
        .show { display: block; }

        .modal-note {
            background-color: #f8f9fa; border-left: 4px solid #007bff; padding: 10px 15px;
            margin: 15px 0; font-size: 14px; color: #495057;
        }

        #yearSelect {
            padding: 8px 0px 8px 4px; border: 1px solid #ccc; border-radius: 4px;
            font-size: 14px; background-color: white; cursor: pointer;
        }
        #yearSelect:focus {
            outline: none; border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
        }

            

        .delete-confirm-modal, .export-options-modal { max-width: 500px; }
        .delete-confirm-modal input {
            width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ccc;
            border-radius: 4px; box-sizing: border-box;
        }

        .planning-mode .col-hoso,
        .planning-mode .col-kehoach-conlai { display: none; }
		.planning-mode .col-tagname { display: none; }
		/* --- CSS MỚI CHO 2 CỘT PHÂN BỔ --- */
        /* Mặc định ẩn */
        .col-nam-phanbo, .col-chiphi-phanbo { display: none; }
      .col-cp-cap1 { display: none; }  
        /* Hiển thị khi ở chế độ Planning */
		#taskList.planning-mode .col-cp-cap1 { display: table-cell; width: 8%; text-align: right; }
        .planning-mode .col-nam-phanbo, 
        .planning-mode .col-chiphi-phanbo { display: table-cell; }

        /* Độ rộng cột */
        .planning-mode .col-nam-phanbo { width: 3%; text-align: center; }
        #taskList.planning-mode .col-chiphi-phanbo { width: 8%; text-align: right; }
        /* --------------------------------- */
        .col-tansuat-th, .col-ghichu, .col-kh-nam-truoc, .col-th-nam-truoc, .col-tg-batdau, .col-tg-hoanthanh, .col-action { display: none; }
        .planning-mode .col-tansuat-th,
.planning-mode .col-ghichu,
.planning-mode .col-kh-nam-truoc,
.planning-mode .col-th-nam-truoc,
.planning-mode .col-tg-batdau,

.planning-mode .col-action { display: table-cell; }
        .planning-mode .task-justification { display: table-row !important; }

        .planning-mode .col-dv-thuchien { width: 4% !important; }
        .planning-mode .col-chiphi { width: 8%; }
        .planning-mode .col-chiphi-thuchien { width: 8% !important; }
        .planning-mode .col-kh-nam-truoc { width: 8% !important; }
		.planning-mode .col-th-nam-truoc { width: 8% !important; }
        .planning-mode .col-ghichu { width: 15%; }
        .planning-mode .col-action { width: 4% !important; }
		
		/* --- CSS ĐIỀU CHỈNH CỠ CHỮ CHO PLANNING MODE --- */
        /* Mặc định cỡ chữ của bảng là 80%.
           Yêu cầu giảm 15% (còn 85% của hiện tại).
           Tính toán: 80% * 0.85 = 70%.
        */
        #taskList.planning-mode th, 
        #taskList.planning-mode td {
            font-size: 70%; /* Giảm xuống còn 70% kích thước chuẩn */
            padding: 5px;   /* Giảm nhẹ padding (khoảng cách) để hàng gọn hơn */
        }
        
        /* Điều chỉnh cả các ô input/select nằm trong bảng khi ở chế độ này (nếu có) */
        #taskList.planning-mode input,
        #taskList.planning-mode select,
        #taskList.planning-mode textarea {
            font-size: 100%; /* Kế thừa 70% từ td cha */
        }

/* --- CSS MỚI: GIẢM CỠ CHỮ CHO MODAL THÊM/SỬA --- */
        
        /* 1. Giảm cỡ chữ cho tiêu đề (th) và nội dung (td) trong bảng Modal */
        #dataModal .modal-table th,
        #dataModal .modal-table td {
            font-size: 70%; /* Giảm cỡ chữ xuống còn 70% */
            padding: 4px;   /* Giảm khoảng cách đệm (padding) từ 8px xuống 5px cho gọn */
            line-height: 1.4; /* Điều chỉnh khoảng cách dòng */
        }

        /* 2. Điều chỉnh các ô Input bên trong Modal để khớp với cỡ chữ mới */
        #dataModal .modal-table input {
            font-size: 100%; /* Kế thừa cỡ chữ 70% từ thẻ td cha */
            padding: 3px;    /* Giảm padding trong ô nhập liệu */
            height: auto;    /* Để chiều cao tự động điều chỉnh theo cỡ chữ */
        }
        
        /* 3. (Tùy chọn) Nếu tiêu đề bảng (Header) bị nhỏ quá, bạn có thể giữ nguyên nó */
        /* Bỏ comment dòng dưới nếu bạn muốn tiêu đề to hơn nội dung một chút */
        /* #dataModal .modal-table th { font-size: 90%; } */

        #summaryDetailModal .modal-content { max-width: 95%; }
        .summary-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .summary-parent-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            background-color: #f8f9fa;
        }
        .summary-parent-card h3 {
            margin-top: 0;
            color: #007bff;
            border-bottom: 2px solid #007bff;
            padding-bottom: 8px;
            font-size: 1.1rem;
        }
        .summary-columns-container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }
        .summary-info-column {
            width: 50%;
            font-size: 14px;
        }
        .summary-info-column h4 {
            margin-top: 0;
            margin-bottom: 8px;
            color: #495057;
            border-bottom: 1px solid #ccc;
            padding-bottom: 4px;
            font-size: 15px;
        }
        .summary-info-column p {
            margin: 4px 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: flex;
            justify-content: space-between;
        }
        .summary-info-column p strong {
            color: #495057;
        }
        .summary-parent-card .value {
            font-weight: bold;
            color: #333;
        }
        .summary-charts-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }
        .chart-wrapper {
            width: 45%;
            max-width: 150px;
            text-align: center;
        }
        .chart-wrapper p {
            font-size: 12px;
            margin-top: 5px;
            font-weight: bold;
            color: #333;
        }

        @media screen and (max-width: 768px) {
            .responsive-modal-table thead { display: none; }
            .responsive-modal-table, .responsive-modal-table tbody, .responsive-modal-table tr, .responsive-modal-table td {
                display: block; width: 100%;
            }
            .responsive-modal-table tr { margin-bottom: 15px; border: 1px solid #ddd; border-radius: 5px; padding: 10px; }
            .responsive-modal-table td {
                display: flex; justify-content: space-between; padding-left: 50%;
                position: relative; text-align: right; border: none; padding-bottom: 5px;
            }
            .responsive-modal-table td:before {
                content: attr(data-label); position: absolute; left: 10px; width: 45%;
                padding-right: 10px; font-weight: bold; text-align: left;
            }
            .search-modal-mobile td { font-size: 12px; }
            .search-modal-mobile .btn-edit-exec { display: none; }
            .search-modal-mobile .btn-profile-exec {
                flex: 1; padding: 10px 0; font-size: 16px; margin-top: 5px;
            }
            .summary-details-grid {
                grid-template-columns: 1fr;
            }
        }

.task-justification-parent td:nth-child(3) { 
            font-weight: bold;
            padding-left: 25px !important; 
        }
        .task-justification-child td:nth-child(3) { 
            font-style: italic; 
            padding-left: 40px !important; 
        }
        /* SỬA ĐỔI: Ép buộc giải trình con cũng căn phải như cha */
        .task-justification-child td:nth-child(2) { 
            text-align: left !important;
            padding-right: 0px !important;
            padding-left: 1px !important; 
        }
    
/* CSS cho modal Kế hoạch đã duyệt */
    #approvedPlanLinks {
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 10px;
        background-color: #f9f9f9;
        min-height: 100px;
    }
    #approvedPlanLinks p.loading-text,
    #approvedPlanLinks p.empty-text {
        text-align: center;
        color: #777;
        margin-top: 20px;
        font-style: italic;
    }
    .plan-link-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px;
        border-bottom: 1px solid #eee;
    }
    .plan-link-item:last-child {
        border-bottom: none;
    }
    .plan-link-item a {
        color: #0056b3;
        text-decoration: none;
        font-weight: 500;
        font-size: 16px;
        word-break: break-all; /* Tự xuống dòng nếu link quá dài */
        margin-right: 15px;
    }
    .plan-link-item a:hover {
        text-decoration: underline;
    }
    .plan-link-delete-btn {
        padding: 4px 8px;
        font-size: 12px;
        margin-left: 15px;
        flex-shrink: 0; /* Ngăn nút bị co lại */
    }

    /* CSS cho modal Dán link */
    #pasteLinkModal input[type="text"],
    #pasteLinkModal input[type="url"] {
        width: 100%;
        padding: 12px;
        margin-bottom: 15px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
        font-size: 16px;
    }

    /* === KẾT THÚC MÃ MỚI === */


/* Thêm CSS này */
#taskList .editable-cell {
    cursor: pointer;
    transition: background-color 0.2s;
}
#taskList .editable-cell:hover {
    background-color: #f0f8ff; /* Màu xanh Alice blue nhạt */
}

/* Kiểu cho input khi đang chỉnh sửa */
.editable-input {
    width: 95%;
    padding: 6px;
    border: 1px solid #007bff;
    border-radius: 4px;
    box-sizing: border-box; /* Đảm bảo input vừa khít với ô */
}

/* --- CSS MỚI: ẨN NÚT ĐIỀU HƯỚNG (SPINNERS) TRONG Ô NHẬP SỐ --- */
        
        /* Dành cho Chrome, Safari, Edge, Opera */
        input[type=number]::-webkit-outer-spin-button,
        input[type=number]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* Dành cho Firefox */
        input[type=number] {
            -moz-appearance: textfield;
        }